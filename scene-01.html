  
  <!DOCTYPE html>
  <html>
    <head>
      <meta charset="utf-8">
      <title>NCPW Prototype</title>
      <meta name="description" content="Basic example for Animation Timeline component."></meta>
        <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script> 
        <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
        <script src="./timeline-data.js"></script>
        <script src="./components.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
        <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css"> -->
        <!-- <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script> -->
        <!-- <script src="https://unpkg.com/aframe-html-shader@1.0.0/dist/aframe-html-shader.min.js"></script> -->
       <link rel="stylesheet" href="./styles.css">
        
    
      </head>
    <body>


<div id="debug">
  ##Debug window##
</div>
      
        <div id="loading">
          <div class="loading-content">
              <div class="loading-content-text">
                  <h1 class="our-label">BKI NCPW2025</h1>
                  <p class="our-label">Loading...</p>
              </div>
          </div>
          <div class="loading-campus">
            <h3 class="our-label">Please select your campus:</h3>
            <div class="loading-content-campus">
              <div class="kangan-selector">
                <button id="kangan-selector-button" type="button">
                  <img src="./assets/kangan.png">
                  <p>Broadmedows</p>
                </button>
              </div>
              <BR>
                <BR>
              <div class="bendigo-selector">
                <button id="bendigo-selector-button" type="button">
                    <img src="./assets/bendigo.png">
                    <p>Bendigo</p>
                </button>
              </div>
            </div>
          </div>        
        </div>  
        




        <div id="menu">
          <div class="menu-grid menu-content">
            <div class="cell cell1 our-label">
                <h1>Welcome!</h1>
                <p>We are celebrating NCPW 2025!
                  
                </p>
            </div>
            <div class="cell cell2">            
                <p>UPDATE WITH WEB AR INSTRUCTIONS & ONBOARDING</p>
                <p>PLACE HOLDER CONTENT</p>
                <p>PLACE HOLDER CONTENT</p>
                <p>PLACE HOLDER CONTENT</p>
            </div>
            <div class="cell cell3">
              <button type="button" id="menu-continue-button">Let's Go!</button>  
            </div>
            <div class="cell cell4">
            </div>
            <div class="cell cell5"><small>Illustrative assets <a href="https://storytribeapp.com/" target="_blank">created with StoryTribe</a></small></div>
          </div>
        </div>  
        
        <div id="scenario">
            <div class="scenario-ui-prompt">
              <div class="scenario-ui-prompt-speech left">
                <span class="scenario-ui-prompt-speech-profile"><img src="./assets/s01-profile-alex.png"></span>
                <span class="scenario-ui-prompt-speech-content"><span>Alex</span><span id="text-content-left">----</span></span>
              </div >
              <div class="scenario-ui-prompt-speech right">
                <span class="scenario-ui-prompt-speech-profile"><img src="./assets/s01-profile-mia.png"></span>
                <span class="scenario-ui-prompt-speech-content"><span>Mia</span><span id="text-content-right">----</span></span>
              </div>
              <div class="scenario-ui-prompt-button-area">
                <button type="button" id="scenario-ui-prompt-button">Continue</button>
              </div>
            </div>
        </div>

        <a-scene id="ARscene" 
        timeline-controller 
        state-tracker 
        mindar-image="imageTargetSrc: ./image.mind; 
                     filterMinCF: 0.0001; 
                     filterBeta: 0.001; 
                     warmupTolerance: 1; 
                     missTolerance: 1; 
                     maxTrack: 1;" 
        color-space="sRGB" 
        renderer="colorManagement: true, physicallyCorrectLights"
        vr-mode-ui="enabled: false" 
        device-orientation-permission-ui="enabled: false">            
        <!-- <a-scene id="ARscene" 
        timeline-controller 
        state-tracker 
     
        color-space="sRGB" 
        renderer="colorManagement: true, physicallyCorrectLights"
        vr-mode-ui="enabled: false" 
        device-orientation-permission-ui="enabled: false">     -->
           
          <!-- Scene 01 Character Assets -->
          <img id="s01-scene-01-Alex" src="./assets/s01-scene-01-Alex.png">
          <img id="s01-scene-01-Mia" src="./assets/s01-scene-01-Mia.png">
          
          <!-- Scene 02 Character Assets -->
          <img id="s01-scene-02-Alex" src="./assets/s01-scene-02-Alex.png">
          <img id="s01-scene-02-Mia" src="./assets/s01-scene-02-Mia.png">
          
          <!-- Scene 03 Character Assets -->
          <img id="s01-scene-03-Alex" src="./assets/s01-scene-03-Alex.png">
          <img id="s01-scene-03-Mia" src="./assets/s01-scene-03-Mia.png">
          
          <!-- Scene 04 Social Media Assets -->
          <img id="s01-scene-04-comment" src="./assets/s01-scene-04-comment.png">
          <img id="s01-scene-04-heart" src="./assets/s01-scene-04-heart.png">
          <img id="s01-scene-04-like" src="./assets/s01-scene-04-like.png">
          <img id="s01-scene-04-post" src="./assets/s01-scene-04-post.png">
          <img id="s01-scene-04-share" src="./assets/s01-scene-04-share.png">
          <img id="s01-scene-04-smile" src="./assets/s01-scene-04-smile.png">
          
          <!-- Scene 05 Character Assets -->
          <img id="s01-scene-05-Alex" src="./assets/s01-scene-05-Alex.png">
          <img id="s01-scene-05-Mia" src="./assets/s01-scene-05-Mia.png">
          
          <!-- Scene 06 Character Assets -->
          <img id="s01-scene-06-Alex" src="./assets/s01-scene-06-Alex.png">
          <img id="s01-scene-06-Mia" src="./assets/s01-scene-06-Mia.png">
          
          <!-- Scene 07 Character Assets -->
          <img id="s01-scene-07-Alex" src="./assets/s01-scene-07-Alex.png">
          <img id="s01-scene-07-Mia" src="./assets/s01-scene-07-Mia.png">
          
          <!-- Scene 08 Action and Status Assets -->
          <img id="s01-scene-08-bam" src="./assets/s01-scene-08-bam.png">
          <img id="s01-scene-08-friend1" src="./assets/s01-scene-08-friend1.png">
          <img id="s01-scene-08-friend2" src="./assets/s01-scene-08-friend2.png">
          <img id="s01-scene-08-lock" src="./assets/s01-scene-08-lock.png">
          <img id="s01-scene-08-no" src="./assets/s01-scene-08-no.png">
          <img id="s01-scene-08-pow" src="./assets/s01-scene-08-pow.png">
          <img id="s01-scene-08-profile" src="./assets/s01-scene-08-profile.png">
          <img id="s01-scene-08-random" src="./assets/s01-scene-08-random.png">
          <img id="s01-scene-08-troll1" src="./assets/s01-scene-08-troll1.png">
          <img id="s01-scene-08-troll2" src="./assets/s01-scene-08-troll2.png">
          <img id="s01-scene-08-yes" src="./assets/s01-scene-08-yes.png">
          
          <!-- Generic Speech Bubble Assets -->
          <img id="s01-speech-left" src="./assets/s01-speech-left.png">
          <img id="s01-speech-right" src="./assets/s01-speech-right.png">
          <img id="s01-floor" src="./assets/s01-floor.png">

        </a-assets>
        
        
        
                 <!-- Anime.js Timeline Container -->
         <div id="timelineContainer" style="display: none;"></div>
         
         <a-entity id="scenario-assets" position="0 0 -20" mindar-image-target="targetIndex: 0">

              <a-image id="s01-floor" src="#s01-floor" scale="2 1 2" position="0 -2 0" rotation="-90 0 0"></a-image>
          <!-- <a-plane color="blue" opaciy="0.5" position="0 0 0" height="0.552" width="1" rotation="0 0 0"></a-plane> -->
              <a-image id="s01-speech-lt" src="#s01-speech-left" scale="1 1 1" position="-0.25 2.25 -2" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
              <a-image id="s01-speech-rt" src="#s01-speech-right" scale="1 1 1" position="0.25 2.25 -2.1" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>

              <a-image id="s01s01-Alex" src="#s01-scene-01-Alex" scale="2 4 1" position="-2.5 0 -2" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
              <a-image id="s01s01-Mia" src="#s01-scene-01-Mia" scale="2 4 1" position="0.75 0 -2.1" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>


              <a-image id="s01s02-Alex" src="#s01-scene-02-Alex" scale="2 4 1" position="-0.55 0 -2" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
              <a-image id="s01s02-Mia" src="#s01-scene-02-Mia" scale="2 4 1" position="0.75 0 -2.1" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>

              <a-image id="s01s03-Alex" src="#s01-scene-03-Alex" scale="2 4 1" position="-0.55 0 -2" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
              <a-image id="s01s03-Mia" src="#s01-scene-03-Mia" scale="2 4 1" position="0.75 0 -2.1" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>

              <a-image id="s01s04-post" src="#s01-scene-04-post" scale="2 3 1" position="-0 0 -1" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
              <a-image id="s01s04-heart" src="#s01-scene-04-heart" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
              <a-image id="s01s04-like" src="#s01-scene-04-like" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
              <a-image id="s01s04-share" src="#s01-scene-04-share" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
              <a-image id="s01s04-smile" src="#s01-scene-04-smile" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" visible="false"opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>


              <a-image id="s01s05-Alex" src="#s01-scene-05-Alex" scale="2 4 1" position="-0.55 0 -2" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
              <a-image id="s01s05-Mia" src="#s01-scene-05-Mia" scale="2 4 1" position="0.75 0 -2.1" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>

              <a-image id="s01s06-Alex" src="#s01-scene-06-Alex" scale="2 4 1" position="-0.55 0 -2" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
              <a-image id="s01s06-Mia" src="#s01-scene-06-Mia" scale="2 4 1" position="0.75 0 -2.1" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>

              <a-image id="s01s07-Alex" src="#s01-scene-07-Alex" scale="2 4 1" position="-0.55 0 -2.1" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
              <a-image id="s01s07-Mia" src="#s01-scene-07-Mia" scale="2 4 1" position="0.5 0 -2" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>

              <!-- Scene 08 Action and Status Assets -->
              <a-image id="s01s08-profile" src="#s01-scene-08-profile" scale="2 3 1" position="-0 0 -1" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
              
              <a-image id="s01s08-random" src="#s01-scene-08-random" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" visible="false" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
     
            </a-entity>


            <a-entity id="assetsGamepad" position="0 0 0"></a-entity>
              <!-- Navigation boxes arranged in a cross pattern -->
              <a-box id="up-button" 
                     position="0 0.2 -1" 
                     scale="0.1 0.1 0.1" 
                     color="green"
                     class="clickable"></a-box>
              
              <a-box id="down-button"
                     position="0 -0.2 -1"
                     scale="0.1 0.1 0.1"
                     color="blue" 
                     class="clickable"></a-box>
              
              <a-box id="left-button"
                     position="-0.2 0 -1"
                     scale="0.1 0.1 0.1"
                     color="red"
                     class="clickable"></a-box>
              
              <a-box id="right-button"
                     position="0.2 0 -1"
                     scale="0.1 0.1 0.1"
                     color="yellow"
                     class="clickable"></a-box>
              
              <a-box id="forward-button"
                     position="0.2 0.2 -1"
                     scale="0.1 0.1 0.1"
                     color="purple"
                     class="clickable"></a-box>
                     
              <a-box id="backward-button"
                     position="0.2 -0.2 -1"
                     scale="0.1 0.1 0.1"
                     color="pink"
                     class="clickable"></a-box>
              </a-entity>
        
        <!-- <a-image id="s01s08-bam" src="#s01-scene-08-bam" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s08-friend1" src="#s01-scene-08-friend1" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s08-friend2" src="#s01-scene-08-friend2" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s08-lock" src="#s01-scene-08-lock" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s08-no" src="#s01-scene-08-no" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s08-pow" src="#s01-scene-08-pow" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s08-troll1" src="#s01-scene-08-troll1" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s08-troll2" src="#s01-scene-08-troll2" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s08-yes" src="#s01-scene-08-yes" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image> -->


        <!-- Pause trigger entity (invisible) -->
        <a-entity id="pauseTrigger" visible="false"></a-entity>



        <!-- Vimeo Video on a plane -->
      <!-- <a-entity 
      geometry="primitive: plane; width: 3; height: 1.6875" 
      material="shader: html; target: #vimeoContainer" 
      position="0 1.6 -3">
    </a-entity> -->

        <a-camera position="0 0 1" look-controls="enabled: false" cursor="rayOrigin: mouse"></a-camera>
      </a-scene>

<!-- Hidden iframe container -->
<!-- <div id="vimeoContainer" style="display: none;">
  <iframe 
    src="https://player.vimeo.com/video/911432606?background=1&autoplay=1&muted=1"
    width="640" height="360" frameborder="0" allow="autoplay; fullscreen" allowfullscreen>
  </iframe>
</div> -->
      <script>
        console.log("filterMinCF: 0.0001; | filterBeta: 0.001; | warmupTolerance: 1; | missTolerance: 1; | maxTrack: 1");
        var BKICampus = '';
        
        var ver = '0.55 - flooring';

        const debug = document.querySelector('#debug'); 
        function debugLog(message) {
          debug.innerHTML = ver+"> Debug: "+message;
        }

        function moveCamera(direction) {
                  const assetArea = document.querySelector('#scenario-assets');
                  const currentPosition = assetArea.getAttribute('position');
                  
                  switch(direction) {
                    case 'up':
                      assetArea.setAttribute('position', `${currentPosition.x} ${currentPosition.y + 0.1} ${currentPosition.z}`);
                      break;
                    case 'down':
                      assetArea.setAttribute('position', `${currentPosition.x} ${currentPosition.y - 0.1} ${currentPosition.z}`);
                      break;
                    case 'left':
                      assetArea.setAttribute('position', `${currentPosition.x - 0.1} ${currentPosition.y} ${currentPosition.z}`);
                      break;
                    case 'right':
                      assetArea.setAttribute('position', `${currentPosition.x + 0.1} ${currentPosition.y} ${currentPosition.z}`);
                      break;
                    case 'forward':
                      assetArea.setAttribute('position', `${currentPosition.x} ${currentPosition.y} ${currentPosition.z + 0.1}`);
                      break;                      
                    case 'backward':
                      assetArea.setAttribute('position', `${currentPosition.x} ${currentPosition.y} ${currentPosition.z - 0.1}`);
                      break;
                  }


                  debugLog(`moved:${direction} | ${currentPosition.x.toFixed(3)} ${currentPosition.y.toFixed(3)} ${currentPosition.z.toFixed(3)} `);
                  console.log(`moved:${direction} | ${currentPosition.x.toFixed(3)} ${currentPosition.y.toFixed(3)} ${currentPosition.z.toFixed(3)} `);


                }


        document.querySelector('#kangan-selector-button').addEventListener('click', () => {
            BKICampus = 'kangan';
            debugLog("Kangan campus selected");
            appState.setState('Menu');

        });

        document.querySelector('#bendigo-selector-button').addEventListener('click', () => {
            BKICampus = 'bendigo'; 
            debugLog("Bendigo campus selected");
            appState.setState('Menu');

        });
        document.querySelector('#menu-continue-button').addEventListener('click', () => {
            appState.setState('Scenario-Scan');

        });

        // Add click event listeners for navigation boxes
        document.addEventListener('DOMContentLoaded', () => {
          // Wait for A-Frame to be ready
          const scene = document.querySelector('#ARscene');
          if (scene) {
            scene.addEventListener('loaded', () => {
              // Add click listeners to navigation boxes
              const upButton = document.querySelector('#up-button');
              const downButton = document.querySelector('#down-button');
                const leftButton = document.querySelector('#left-button');
                const rightButton = document.querySelector('#right-button');
                const forwardButton = document.querySelector('#forward-button');
                const backwardButton = document.querySelector('#backward-button');

              if (upButton) {
                upButton.addEventListener('click', () => moveCamera('up'));
              }
              if (downButton) {
                downButton.addEventListener('click', () => moveCamera('down'));
              }
              if (leftButton) {
                leftButton.addEventListener('click', () => moveCamera('left'));
              }
              if (rightButton) {
                rightButton.addEventListener('click', () => moveCamera('right'));
              }
              if (forwardButton) {
                forwardButton.addEventListener('click', () => moveCamera('forward'));
              }
              if (backwardButton) {
                backwardButton.addEventListener('click', () => moveCamera('backward'));
              }
            });
          }
        });

        // Wait for A-Frame scene to be ready before setting up state callbacks
        document.addEventListener('DOMContentLoaded', () => {
          
          
          
          
          const scene = document.querySelector('#ARscene');
          let arSystem;
          if (scene) {
            scene.addEventListener('loaded', () => {
              // Wait a bit more for components to fully initialize
              


  




              arSystem = scene.systems["mindar-image-system"];
              
              const appState = window.appState;
              const timelineController = document.querySelector('#ARscene').components['timeline-controller'];

              setTimeout(() => {
              if (window.appState) {  


              // arReady event triggered when ready
              scene.addEventListener("arReady", (event) => {
                  // console.log("MindAR is ready")
                  debugLog("MindAR is ready");
                  console.log("MindAR is ready");
                });

                // arError event triggered when something went wrong. Mostly browser compatbility issue
                scene.addEventListener("arError", (event) => {
                    // console.log("MindAR failed to start")
                    debugLog("MindAR failed to start");
                    console.log("MindAR failed to start");
                  });

                  const arImageTargetAssets = document.querySelector('#scenario-assets');

                  // detect target found
                  arImageTargetAssets.addEventListener("targetFound", event => {
                    debugLog("target found in state: " + appState.getCurrentState());
                    console.log("target found in state: " + appState.getCurrentState());
                    switch (appState.getCurrentState()) {
                      case 'Scenario-Scan':
                        appState.setState('Scenario-Animate');
                        break;
                      case 'Scenario-Animate':
                        timelineController.quickPlay();
                        break;
                    }
                  });
                  // detect target lost
                  arImageTargetAssets.addEventListener("targetLost", event => {
                    debugLog("target lost in state: " + appState.getCurrentState());
                      console.log("target lost");
                      switch (appState.getCurrentState()) {
                      case 'Scenario-Scan':
                        break;
                      case 'Scenario-Animate':
                      timelineController.quickPause();
                        break;
                    }
                  });


                  appState.addStateCallback('Loading', 'onEnter', () => {
                    console.log('Loading state entered');

                    setTimeout(() => {
                      console.log('Loading campus selector');
                      document.querySelector('.loading-content').style.display = 'none';
                      document.querySelector('.loading-campus').style.display = 'block';
                    }, 500);
                  });

                  appState.addStateCallback('Loading', 'onExit', () => { 
                    console.log('Loading state exited');
                      console.log('Loading campus selector');
                      document.querySelector('#loading').style.display = 'none';
                      document.querySelector('.loading-campus').style.display = 'none';
                      document.querySelector('.loading-content').style.display = 'block';

                      console.log('BKICampus:', BKICampus);
                  });
 
                  appState.addStateCallback('Menu', 'onEnter', () => {
                    console.log('Menu state entered');
                    document.querySelector('#menu').style.display = 'block';

                  });
 
                  appState.addStateCallback('Menu', 'onExit', () => { 
                    console.log('Menu state exited');
                    document.querySelector('#menu').style.display = 'none';
                  });   
 
                  appState.addStateCallback('Scenario-Scan', 'onEnter', () => {
                    console.log('Scenario-Scan state entered');
                    document.querySelector('#scenario').style.display = 'none';

                    
                  });
 
                  appState.addStateCallback('Scenario-Scan', 'onExit', () => { 
                    console.log('Scenario-Scan state exited');
                  }); 

                  appState.addStateCallback('Scenario-Animate', 'onEnter', () => {
                    //Get the timeline-controller component instance
                    if (timelineController && timelineController.startAnimeTimeline) {
                      timelineController.startAnimeTimeline();
                      document.querySelector('#scenario').style.display = 'block';
                    } else {
                      console.error('Timeline controller not available');
                    }
                    
                  });
 
                  appState.addStateCallback('Scenario-Animate', 'onExit', () => { 
                    console.log('Scenario-Animate state exited');
                  });   

                  appState.addStateCallback('Scenario-Video', 'onEnter', () => {
                    console.log('Scenario-Video state entered');
                  });
 
                  appState.addStateCallback('Scenario-Video', 'onExit', () => { 
                    console.log('Scenario-Video state exited');
                  });     
 
                  appState.addStateCallback('Scenario-Quiz', 'onEnter', () => {
                    console.log('Scenario-Quiz state entered');
                  });
 
                  appState.addStateCallback('Scenario-Quiz', 'onExit', () => { 
                    console.log('Scenario-Quiz state exited');
                  });     
 
                  appState.addStateCallback('Scenario-Finish', 'onEnter', () => {
                    console.log('Scenario-Finish state entered');
                  });
 
                  appState.addStateCallback('Scenario-Finish', 'onExit', () => { 
                    console.log('Scenario-Finish state exited');
                  });     
 
                  appState.addStateCallback('Filter', 'onEnter', () => {
                    console.log('Filter state entered');
                  });
 
                  appState.addStateCallback('Filter', 'onExit', () => { 
                    console.log('Filter state exited');
                  });
                  
                  appState.setState('Loading');
                  console.log("Current state:", appState.getCurrentState());
                } else {
                  console.error('appState not available yet');
                }
              }, 500);
            });
          }
        });
      </script>
         
  
    </body>
  </html>