  
  <!DOCTYPE html>
  <html>
    <head>
      <meta charset="utf-8">
      <title>A-Frame Animation Timeline Component - Bohemian</title>
      <meta name="description" content="Basic example for Animation Timeline component."></meta>
             <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script> 
       <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    
       <style>

        body {

          font-family: 'Open Sans', sans-serif;
        }        
        .a-enter-vr {display:none;}

        .scenario-ui-prompt {
          position: fixed;
          bottom: 0px;
          left: 0px;
          z-index: 1000;
          padding: 10px 2%;
          width: 96%;
          height: auto;
          background-color: rgba(0, 0, 0, 0.5);
          display: flex;
          flex-direction: column;
          flex-wrap: nowrap;
          justify-content: center;
          align-items: stretch;
          align-content: stretch;
          color: #fff;
          text-shadow: 1px 1px 2px #000;
          opacity: 0;
        }
        .scenario-ui-prompt-speech {
          display: block;
          flex-grow: 0;
          flex-shrink: 1;
          flex-basis: auto;
          align-self: flex-start;
          order: 0;
          display: flex          ;
          flex-direction: row;
          flex-wrap: nowrap;
          align-content: center;
          justify-content: flex-start;
          align-items: center;
          width: auto;
          padding: 5px 10px;
          margin: 10px 0;
          border-radius: 8px;
          background: rgb(132 105 161 / 50%);
        }
        .scenario-ui-prompt-speech-profile {
          width: 50px;
          height: 50px;
          border-radius: 50%;
          overflow: hidden;
        }
        .scenario-ui-prompt-speech-profile img {
          width: 100%;
          height: 100%;
          object-fit: cover;
          max-width: 64px;
          max-height: 64px;
        }
        .scenario-ui-prompt-speech-content {
          margin: 0 10px;
          font-size: 16px;
          font-weight: bold;
          display: flex;
          flex-direction: column;
          flex-wrap: nowrap;
          align-content: flex-start;
          justify-content: flex-start;
          align-items: flex-start;
        }
        .scenario-ui-prompt-speech-content>span:nth-child(1) { 
          font-size: 16px;
          font-weight: bold;
          margin-bottom: 5px;
        }
        .scenario-ui-prompt-speech-content>span:nth-child(2) {
          font-size: 18px;
          font-weight: normal;
        }

        
        .scenario-ui-prompt-speech.right {
          align-self: flex-end;
          flex-direction: row-reverse;
          background: rgb(127 189 66 / 80%);
        }
        .scenario-ui-prompt-speech.right .scenario-ui-prompt-speech-content {
          align-items: flex-end;  
        }


        .scenario-ui-prompt-button-area {
          display: block;
          flex-grow: 0;
          flex-shrink: 1;
          flex-basis: auto;
          align-self: center;
          order: 0;
        }

        #scenario-ui-prompt-button {
          width: auto;
          height: 50px;
          padding: 10px 20px;
          background: #000000;
          color: white;
          border: none;
          border-radius: 5px;
          cursor: pointer;
          font-size: 18px;
          margin-top: 10px;
        }
      
      </style>
        
    
      </head>
    <body>

      <div class="scenario-ui-prompt">
        <div class="scenario-ui-prompt-speech left">
            <span class="scenario-ui-prompt-speech-profile"><img src="./assets/s01-profile-alex.png"></span>
            <span class="scenario-ui-prompt-speech-content"><span>Alex</span><span id="text-content-left">----</span></span>
        </div >
        <div class="scenario-ui-prompt-speech right">
          <span class="scenario-ui-prompt-speech-profile"><img src="./assets/s01-profile-mia.png"></span>
          <span class="scenario-ui-prompt-speech-content"><span>Mia</span><span id="text-content-right">----</span></span>
        </div>
        <div class="scenario-ui-prompt-button-area">
          <button id="scenario-ui-prompt-button">Continue</button>
        </div>

      </div>

      <a-scene timeline-controller>
        <a-assets timeout="2000">
           
          <!-- Scene 01 Character Assets -->
          <img id="s01-scene-01-Alex" src="./assets/s01-scene-01-Alex.png">
          <img id="s01-scene-01-Mia" src="./assets/s01-scene-01-Mia.png">
          
          <!-- Scene 02 Character Assets -->
          <img id="s01-scene-02-Alex" src="./assets/s01-scene-02-Alex.png">
          <img id="s01-scene-02-Mia" src="./assets/s01-scene-02-Mia.png">
          
          <!-- Scene 03 Character Assets -->
          <img id="s01-scene-03-Alex" src="./assets/s01-scene-03-Alex.png">
          <img id="s01-scene-03-Mia" src="./assets/s01-scene-03-Mia.png">
          
          <!-- Scene 04 Social Media Assets -->
          <img id="s01-scene-04-comment" src="./assets/s01-scene-04-comment.png">
          <img id="s01-scene-04-heart" src="./assets/s01-scene-04-heart.png">
          <img id="s01-scene-04-like" src="./assets/s01-scene-04-like.png">
          <img id="s01-scene-04-post" src="./assets/s01-scene-04-post.png">
          <img id="s01-scene-04-share" src="./assets/s01-scene-04-share.png">
          <img id="s01-scene-04-smile" src="./assets/s01-scene-04-smile.png">
          
          <!-- Scene 05 Character Assets -->
          <img id="s01-scene-05-Alex" src="./assets/s01-scene-05-Alex.png">
          <img id="s01-scene-05-Mia" src="./assets/s01-scene-05-Mia.png">
          
          <!-- Scene 06 Character Assets -->
          <img id="s01-scene-06-Alex" src="./assets/s01-scene-06-Alex.png">
          <img id="s01-scene-06-Mia" src="./assets/s01-scene-06-Mia.png">
          
          <!-- Scene 07 Character Assets -->
          <img id="s01-scene-07-Alex" src="./assets/s01-scene-07-Alex.png">
          <img id="s01-scene-07-Mia" src="./assets/s01-scene-07-Mia.png">
          
          <!-- Scene 08 Action and Status Assets -->
          <img id="s01-scene-08-bam" src="./assets/s01-scene-08-bam.png">
          <img id="s01-scene-08-friend1" src="./assets/s01-scene-08-friend1.png">
          <img id="s01-scene-08-friend2" src="./assets/s01-scene-08-friend2.png">
          <img id="s01-scene-08-lock" src="./assets/s01-scene-08-lock.png">
          <img id="s01-scene-08-no" src="./assets/s01-scene-08-no.png">
          <img id="s01-scene-08-pow" src="./assets/s01-scene-08-pow.png">
          <img id="s01-scene-08-profile" src="./assets/s01-scene-08-profile.png">
          <img id="s01-scene-08-random" src="./assets/s01-scene-08-random.png">
          <img id="s01-scene-08-troll1" src="./assets/s01-scene-08-troll1.png">
          <img id="s01-scene-08-troll2" src="./assets/s01-scene-08-troll2.png">
          <img id="s01-scene-08-yes" src="./assets/s01-scene-08-yes.png">
          
          <!-- Generic Speech Bubble Assets -->
          <img id="s01-speech-left" src="./assets/s01-speech-left.png">
          <img id="s01-speech-right" src="./assets/s01-speech-right.png">

        </a-assets>
        
        
        
                 <!-- Anime.js Timeline Container -->
         <div id="timelineContainer" style="display: none;"></div>
         


        <a-image id="s01s01-Alex" src="#s01-scene-01-Alex" scale="2 4 1" position="-2.5 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s01-Mia" src="#s01-scene-01-Mia" scale="2 4 1" position="0.75 0 -2.1" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>


        <a-image id="s01s02-Alex" src="#s01-scene-02-Alex" scale="2 4 1" position="-0.55 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s02-Mia" src="#s01-scene-02-Mia" scale="2 4 1" position="0.75 0 -2.1" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>

        <a-image id="s01s03-Alex" src="#s01-scene-03-Alex" scale="2 4 1" position="-0.55 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s03-Mia" src="#s01-scene-03-Mia" scale="2 4 1" position="0.75 0 -2.1" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>

        <a-image id="s01s04-post" src="#s01-scene-04-post" scale="2 3 1" position="-0 0 -1" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s04-heart" src="#s01-scene-04-heart" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s04-like" src="#s01-scene-04-like" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s04-share" src="#s01-scene-04-share" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s04-smile" src="#s01-scene-04-smile" scale="1 1 1" position="-0 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>


        <a-image id="s01s05-Alex" src="#s01-scene-05-Alex" scale="2 4 1" position="-0.55 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s05-Mia" src="#s01-scene-05-Mia" scale="2 4 1" position="0.75 0 -2.1" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>

        <a-image id="s01s06-Alex" src="#s01-scene-06-Alex" scale="2 4 1" position="-0.55 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s06-Mia" src="#s01-scene-06-Mia" scale="2 4 1" position="0.75 0 -2.1" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>

        <a-image id="s01s07-Alex" src="#s01-scene-07-Alex" scale="2 4 1" position="-0.55 0 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01s07-Mia" src="#s01-scene-07-Mia" scale="2 4 1" position="0.75 0 -2.1" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>

        <a-image id="s01-speech-lt" src="#s01-speech-left" scale="1 1 1" position="-0.25 2.25 -2" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>
        <a-image id="s01-speech-rt" src="#s01-speech-right" scale="1 1 1" position="0.25 2.25 -2.1" rotation="0 0 0" opacity="0" material="transparent: true; alphaTest: 0.5; depthWrite: true; blending: normal"></a-image>



        <!-- Pause trigger entity (invisible) -->
        <a-entity id="pauseTrigger" visible="false">
        </a-entity>
        

        <!-- Clickable area to advance timeline -->
        <a-plane id="clickArea" 
          color="#FF0000" 
          height="10" 
          width="10" 
          position="0 0 -5" 
          opacity="0.3"
          class="clickable">
        </a-plane>

        <a-plane color="#CCC" height="20" width="20" position="0 -2 0" rotation="-90 0 0"></a-plane>
        <a-sky color="#6EBAA7"></a-sky>
        <a-camera position="0 0.5 1"></a-camera>
      </a-scene>


      
                           <script>
         // Wait for A-Frame to be ready
         AFRAME.registerComponent('timeline-controller', {
           init: function() {
             this.scene = this.el;
             this.timeline = null;
             this.isPaused = false;
             this.currentScene = 1;
             
             // Wait for scene to be fully loaded before starting timeline
             this.el.addEventListener('loaded', this.onSceneLoaded.bind(this));
             
             // Add click handler to advance timeline
             this.clickArea = document.querySelector('#clickArea');
             this.clickArea.addEventListener('click', this.advanceTimeline.bind(this));
             
                           // Add click handler for UI button
              this.uiButton = document.querySelector('#scenario-ui-prompt-button');
              this.uiButton.addEventListener('click', this.advanceTimeline.bind(this));
              
              // Add keyboard controls for timescale
              document.addEventListener('keydown', this.handleKeyPress.bind(this));
           },
           
           onSceneLoaded: function() {
             // Start the anime.js timeline after a short delay
             setTimeout(() => {
               this.startAnimeTimeline();
             }, 1000);
           },
           
           startAnimeTimeline: function() {
             console.log('Starting anime.js timeline...');
             
             // Create the main timeline
             this.timeline = anime.timeline({
               easing: 'easeOutExpo',
               duration: 750,
               complete: () => {
                 console.log('Timeline completed');
               }
             });
             
             ///////////////////////////////////////////////////////////////////////////////////////////
             ///////////////////////////////////////////////////////////////////////////////////////////
             ///////////////////////////////////////////////////////////////////////////////////////////
             ///////////////////////////////////////////////////////////////////////////////////////////
             // Scene 01: Fade In (Mia and Alex simultaneously)
             ///////////////////////////////////////////////////////////////////////////////////////////
             this.timeline
             .add({
                  targets: '#text-content-left',
                  opacity: [1, 1],
                  duration: 10, // Instant change
                  easing: 'linear',
                  begin: () => {
                    document.getElementById('text-content-left').textContent = "Hey Mia!";
                  }
                })
                .add({
                  targets: '#text-content-right',
                  opacity: [1, 1],
                  duration: 10, // Instant change
                  easing: 'linear',
                  begin: () => {
                    document.getElementById('text-content-right').textContent = "Hi Alex!";
                  }
                })
               .add({
                 targets: '#s01s01-Mia',
                 opacity: [0, 1],
                 duration: 500,
                 easing: 'linear'
               })
               .add({
                  targets: '#s01s01-Alex',
                  opacity: [0, 1],
                  position: ['-2.5 0 -2', '-0.45 0 -2'],
                  duration: 1500,
                  easing: 'easeInOutQuad'
                })
                .add({
                  targets: ['#s01s01-Mia', '#s01s01-Alex'],
                  opacity: [1, 0],
                  duration: 1000,
                  easing: 'linear'
                }) 
                .add({
                 targets: ['#s01s02-Mia', '#s01s02-Alex'],
                 opacity: [0, 1],
                 duration: 1000,
                 easing: 'linear'

               },"-=1000");               

            ///////////////////////////////////////////////////////////////////////////////////////////
            // Scene 02: Fade In (Mia and Alex simultaneously)
            /////////////////////////////////////////////////////////////////////////////////////////////
            ///////////////////////////////////////////////////////////////////////////////////////////
            ///////////////////////////////////////////////////////////////////////////////////////////
            ///////////////////////////////////////////////////////////////////////////////////////////

            this.timeline
               .add({
                targets: '.scenario-ui-prompt',
                opacity: [0, 1],
                duration: 500,
                easing: 'linear',
                delay: 500
              })
              .add({
                 targets: ['#s01-speech-lt', '.scenario-ui-prompt-speech.left'],
                 opacity: [0, 1],
                 duration: 1000,
                 easing: 'linear',
                 delay: 500
               })
            
               .add({
                 targets: ['#s01-speech-rt', '.scenario-ui-prompt-speech.right'],
                 opacity: [0, 1],
                 duration: 1000,
                 easing: 'linear',
                 delay: 500
               })
               .add({
                 targets: ['#s01-speech-lt', '#s01-speech-rt'],
                 opacity: [1, 0],
                 duration: 500,
                 easing: 'linear',
                 delay: 2000
               })
               
               .add({
                 targets: '#scenario-ui-prompt-button',
                 opacity: [0, 1],
                 duration: 500,
                 easing: 'linear'
               })               
               // PAUSE: Clickable pause in middle of Scene 02 (5 second timer or click to continue)
               .add({
                 targets: '#pauseTrigger',
                 opacity: [0, 0], // No visual change
                 duration: 3000, // 3 second wait
                 easing: 'linear',
                 begin: () => {
                   console.log('Scene 02 pause started - waiting for click or timer');
                   this.timeline.pause(); // Pause the timeline
                   
                   // Start 3-second timer for auto-resume
                   this.pauseTimer = setTimeout(() => {
                     if (this.timeline.paused) {
                       console.log('Scene 02 pause resolved by timer - continuing to Scene 03');
                       this.timeline.play(); // Resume the timeline
                       //this.uiButton.style.display = 'none'; // Hide the button
                     }
                   });
                 },
                 complete: () => {
                   // Timer handles auto-resume, this callback is no longer needed
                 }
               })


               .add({
                 targets: ['#scenario-ui-prompt-button','.scenario-ui-prompt-speech.left','.scenario-ui-prompt-speech.right'],
                 opacity: [1, 0],
                 duration: 500,
                 easing: 'linear',
                 delay:500
               })               
               
               .add({
                targets: '.scenario-ui-prompt',
                opacity: [1, 0],
                duration: 500,
                easing: 'linear'
              }) // Wait 1 second after characters fade in

              .add({
                  targets: ['#s01s02-Mia', '#s01s02-Alex'],
                  opacity: [1, 0],
                  duration: 1000,
                  easing: 'linear'
                }) 
                .add({
                 targets: ['#s01s03-Mia', '#s01s03-Alex'],
                 opacity: [0, 1],
                 duration: 1000,
                 easing: 'linear'

               },"-=1000");  
             
            ///////////////////////////////////////////////////////////////////////////////////////////
            // Scene 03: Fade In (Mia and Alex simultaneously)
            /////////////////////////////////////////////////////////////////////////////////////////////
            ///////////////////////////////////////////////////////////////////////////////////////////
            ///////////////////////////////////////////////////////////////////////////////////////////
            ///////////////////////////////////////////////////////////////////////////////////////////

            this.timeline
                .add({
                  targets: '#text-content-left',
                  opacity: [1, 1],
                  duration: 10, // Instant change
                  easing: 'linear',
                  begin: () => {
                    document.getElementById('text-content-left').textContent = "I just got a new phone! I posted a selfie with it and my TAFE logo is showing.";
                  }
                })
              .add({
                targets: '.scenario-ui-prompt',
                opacity: [0, 1],
                duration: 500,
                easing: 'linear',
                delay: 500
              })
              .add({
                 targets: ['#s01-speech-lt', '.scenario-ui-prompt-speech.left'],
                 opacity: [0, 1],
                 duration: 1000,
                 easing: 'linear',
                 delay: 3000
               })
               .add({
                 targets: '#s01-speech-lt',
                 opacity: [1, 0],
                 duration: 500,
                 easing: 'linear',
                 delay:1500
               }) 
              .add({
                  targets: ['#s01s03-Mia', '#s01s03-Alex'],
                  opacity: [1, 0],
                  duration: 1000,
                  easing: 'linear'
                }) 
                .add({
                 targets: '#s01s04-post',
                 opacity: [0, 1],
                 position: ['0.5 -0.5 -2', '0.5 0 -1.25'],
                 rotation: ['0 0 0', '0 0 10'], // Spin while moving
                 duration: 1000,
                 easing: 'easeInOutQuad',
                 complete: () => {
                    // Start a separate looping animation when this completes
                    anime({
                      targets: '#s01s04-post',
                      rotation: ['0 0 10', '0 0 5'],
                      duration: 5000,
                      easing: 'linear',
                      loop: true,
                      direction: 'alternate'
                    });

                    anime({
                      targets: '#s01s04-like',
                      opacity: [1, 0],
                 position: ['-1 2.5 -3', '-1 -1.5 -3'],
                 duration: 2000,
                 easing: 'easeInOutQuad',
                                       loop: true,
                      direction: 'alternate'

                    },"-=1000");

                    anime({
                      targets: '#s01s04-heart',
                      opacity: [1, 0],
                 position: ['0.5 2 -2.5', '0.5 -1.75 -2.5'],
                 duration: 2500,
                 easing: 'easeInOutQuad',
                                       loop: true,
                      direction: 'alternate'

                    },"-=500");

                    anime({
                      targets: '#s01s04-share',
                      opacity: [1, 0],
                 position: ['-0.5 2 -3', '-0.5 -1.5 -3.5'],
                 duration: 3000,
                 easing: 'easeInOutQuad',
                                       loop: true,
                      direction: 'alternate'

                    },"-=250");
               
                    anime({
                      targets: '#s01s04-smile',
                      opacity: [1, 0],
                 position: ['1.25 2 -2.25', '1.25 -1.5 -2.25'],
                 duration: 2750,
                 easing: 'easeInOutQuad',
                                       loop: true,
                      direction: 'alternate'

                    },"-=750");

                  }
               },"-=1000")

               // PAUSE: Clickable pause in middle of Scene 02 (5 second timer or click to continue)
               .add({
                 targets: '#pauseTrigger',
                 opacity: [0, 0], // No visual change
                 duration: 3000, // 3 second wait
                 easing: 'linear',
                 begin: () => {
                   console.log('Scene 03 pause started - waiting for click or timer');
                   this.timeline.pause(); // Pause the timeline
                   
                   // Start 3-second timer for auto-resume
                   this.pauseTimer = setTimeout(() => {
                     if (this.timeline.paused) {
                       console.log('Scene 03 pause resolved by timer - continuing to Scene 04');
                       this.timeline.play(); // Resume the timeline
                       //this.uiButton.style.display = 'none'; // Hide the button
                     }
                   });
                 },
                 complete: () => {
                   // Timer handles auto-resume, this callback is no longer needed
                 }
               })

               .add({
                 targets: '.scenario-ui-prompt-speech.left',
                 opacity: [1, 0],
                 duration: 500,
                 easing: 'linear',
                 delay:1500
               })               
               
               .add({
                targets: '.scenario-ui-prompt',
                opacity: [1, 0],
                duration: 500,
                easing: 'linear'
              });
           },
           
                       handleKeyPress: function(event) {
              if (this.timeline) {
                switch(event.key) {
                  case '0':
                    this.timeline.pause();
                    console.log('Timescale set to 0.0x (Paused)');
                    break;
                  case '1':
                    this.timeline.timescale = 1.0;
                    this.timeline.play();
                    console.log('Timescale set to 1.0x (normal speed)');
                    break;
                  case '2':
                    this.timeline.timescale = 2.0;
                    this.timeline.play();
                    console.log('Timescale set to 2.0x (2x speed)');
                    break;
                  case '5':
                    this.timeline.timescale = 5.0;
                    this.timeline.play();
                    console.log('Timescale set to 5.0x (5x speed)');
                    break;
                }
              }
            },
            
            advanceTimeline: function() {
              console.log('Timeline advanced by click!');
              
              // If timeline is paused, resume it
              if (this.timeline && this.timeline.paused) {
                // Cancel the auto-resume timer since user clicked early
                if (this.pauseTimer) {
                  clearTimeout(this.pauseTimer);
                  this.pauseTimer = null;
                }
                
                this.timeline.play();
                //this.uiButton.style.display = 'none'; // Hide the button
                console.log('Timeline resumed by click');
              } else {
                // If timeline is running, pause it (for debugging)
                console.log('Timeline is currently running');
              }
            }
         });
        </script>
  
    </body>
  </html>
